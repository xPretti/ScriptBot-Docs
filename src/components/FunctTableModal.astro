---
import { FUNCTION_MAPPING } from "@src/data/functions-data";
import CodeVar from "@components/CodeVar.astro";
import { BookOpenText } from "lucide-react";
import ReactFnModal from "./react/functions/ReactFnModal";

const { category } = Astro.props;

const elements = FUNCTION_MAPPING.get(category) && Array.from(FUNCTION_MAPPING.get(category)!.values());

const containsAliases =
   elements &&
   elements.find((fn) => {
      return fn.aliases;
   });
---

{
   elements && (
      <table>
         <thead>
            <tr>
               <th>FUNÇÕES</th>
               {containsAliases && <th class="aliases">ALIASES</th>}
               <th>RETORNOS</th>
            </tr>
         </thead>
         <tbody>
            {elements.map((fn) => (
               <tr>
                  <td>
                     <div class="name-container">
                        {fn.aliases && (
                           <div class="aliases-mobile">
                              <CodeVar>{fn.aliases}</CodeVar>
                           </div>
                        )}
                        <CodeVar>{fn.name}</CodeVar>
                     </div>
                  </td>
                  {containsAliases && <td class="aliases">{fn.aliases && <CodeVar>{fn.aliases}</CodeVar>}</td>}
                  <td>
                     <ReactFnModal
                        client:visible
                        fnCategory={fn.category}
                        fnName={fn.name}
                     >
                        <div class="description">
                           <p class="text">{fn.description.simple}</p>
                           {/* <Icon class="redirect-icon" name="open-book" size="1.5rem" /> */}
                           <div class="redirect-icon">
                              <BookOpenText size="1.5rem" />
                           </div>
                        </div>
                     </ReactFnModal>
                  </td>
               </tr>
            ))}
         </tbody>
      </table>
   )
}

<!-- Estilos -->
<style>
   td {
      height: 3rem;
      vertical-align: middle;
   }
   p,
   svg {
      margin: 0;
      padding: 0;
   }
   .description {
      position: relative;
      display: flex;
      flex-direction: row;
      height: 100%;
      align-items: center;
   }

   .description:active {
      color: var(--sl-color-accent);
   }

   .redirect-icon {
      margin: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0.1;
      position: absolute;
      height: 100%;
      top: 0;
      right: 10px;
   }

   .aliases-mobile {
      display: none;
   }
   @media (max-width: 950px) {
      .aliases {
         display: none;
      }
      .aliases-mobile {
         display: block;
      }
   }

   @media (pointer: fine) {
      .description:hover .text,
      .description:hover .redirect-icon {
         color: var(--sl-color-accent);
         opacity: 1;
         transition: opacity 0.2s ease-in-out;
         cursor: pointer;
      }
   }
</style>
