---
title: Variables
---

import { Aside } from "@astrojs/starlight/components";

## Variáveis locais de Posição

> Essas variáveis são definidas previamente e utilizadas como parâmetros fixos durante a execução de gatilhos ou eventos de posição.

| VARIÁVEIS                                   | RETORNOS                                                                                         |
| ------------------------------------------- | ------------------------------------------------------------------------------------------------ |
| <code class='variable'>\_TICKET</code>      | Retorna o ticket do pedido.                                                                      |
| <code class='variable'>\_REQUEST</code>     | Retorna o ticket de solicitação do pedido.                                                       |
| <code class='variable'>\_PARENT</code>      | Retorna o ticket da ordem-mãe, se houver.                                                        |
| <code class='variable'>\_MAGIC</code>       | Retorna o magic number do pedido.                                                                |
| <code class='variable'>\_SYMBOL</code>      | Retorna o ativo no qual o pedido foi criado.                                                     |
| <code class='variable'>\_TIME</code>        | Retorna o horário de abertura do pedido.                                                         |
| <code class='variable'>\_PRICE</code>       | Retorna o preço de abertura do pedido.                                                           |
| <code class='variable'>\_SL</code>          | Retorna o preço do stop loss do pedido.                                                          |
| <code class='variable'>\_TP</code>          | Retorna o preço do take profit do pedido.                                                        |
| <code class='variable'>\_PROFIT</code>      | Retorna o lucro atual da posição.                                                                |
| <code class='variable'>\_VOLUME</code>      | Retorna o volume atual do pedido.                                                                |
| <code class='variable'>\_UPTIME</code>      | Retorna o tempo, em segundos, que o pedido está aberto.                                          |
| <code class='variable'>\_TYPE</code>        | Retorna o tipo do pedido (**0** = Compra, **1** = Venda).                                        |
| <code class='variable'>\_COMMENT</code>     | Retorna o comentário associado ao pedido.                                                        |
| <code class='variable'>\_FLAG_CHILD</code>  | Retorna se o pedido é filho de outra posição.                                                    |
| <code class='variable'>\_FLAG_CLIENT</code> | Retorna se o pedido foi adicionado usando expressões lógicas (como **Buy()**, **Sell()**, etc.). |
| <code class='variable'>\_FLAG_SA</code>     | Retorna se o pedido foi adicionado pelo subsistema de Preço Médio Simples.                       |

<Aside type="tip">
  Em eventos de modificação, como no `OnPositionModify()`, as variáveis locais
  possuem duas versões: uma com o sufixo **_OLD** e outra sem sufixo.
  <br />
  As variáveis com o sufixo **_OLD** contêm o valor **antes** da modificação,
  enquanto as sem sufixo refletem o valor **após** a modificação.
</Aside>

## Variáveis locais de Gatilhos:

> Essas variáveis funcionam como parâmetros locais e imutáveis, configurados previamente à ativação de um gatilho.

| VARIÁVEIS                                            | RETORNOS                                                             |
| ---------------------------------------------------- | -------------------------------------------------------------------- |
| <code class='variable'>\_TRIG_TYPE</code>            | Retorna o tipo do gatilho; (**0** = Compra, **1** = Venda)           |
| <code class='variable'>\_TRIG_IS_OPERATION</code>    | Retorna se o gatilho é uma operação boleana;                         |
| <code class='variable'>\_TRIG_OPERATION</code>       | Retorna o resultado da operação; (**0** = Falso, **1** = Verdadeiro) |
| <code class='variable'>\_TRIG_PRICE</code>           | Retorna o preço do gatilho, caso ele seja um gatilho de preço;       |
| <code class='variable'>\_TRIG_WEIGHT_MIN</code>      | Retorna o peso mínimo do filtro;                                     |
| <code class='variable'>\_TRIG_WEIGHT_VALIDATE</code> | Retorna o peso total validado do filtro;                             |
| <code class='variable'>\_TRIG_VALIDS</code>          | Retorna a quantidade de filtros validados;                           |
| <code class='variable'>\_TRIG_VALIDS_COM</code>      | Retorna a quantidade de filtros complementares validados;            |
| <code class='variable'>\_TRIG_VALIDS_REQ</code>      | Retorna a quantidade de filtros obrigatórios validados;              |

## Variáveis da Conta:

> Essas variáveis contêm dados da conta, incluindo saldo disponível, margens operacionais, limites de operação e informações da corretora.

| VARIÁVEIS:                                       | SIGLAS:                                   | RETORNOS:                                  |
| ------------------------------------------------ | ----------------------------------------- | ------------------------------------------ |
| <code class='variable'>BALANCE</code>            | <code class='variable-abbr'>BAL</code>    | Retorna o saldo da conta;                  |
| <code class='variable'>CREDIT</code>             | <code class='variable-abbr'>CRED</code>   | Retorna o credito da conta;                |
| <code class='variable'>EQUITY</code>             | <code class='variable-abbr'>EQT</code>    | Retorna o patrimônio liquido da conta;     |
| <code class='variable'>MARGIN</code>             |                                           | Retorna a margem da conta;                 |
| <code class='variable'>MARGIN_FREE</code>        | <code class='variable-abbr'>MARGF</code>  | Retorna a margem livre da conta;           |
| <code class='variable'>MARGIN_LEVEL</code>       | <code class='variable-abbr'>MARGL</code>  | Retorna o nível de margem da conta;        |
| <code class='variable'>MARGIN_INITIAL</code>     | <code class='variable-abbr'>MARGI</code>  | Retorna a margem inicial da conta;         |
| <code class='variable'>MARGIN_MAINTENANCE</code> | <code class='variable-abbr'>MARGM</code>  | Retorna a margem de manutenção da conta;   |
| <code class='variable'>LOGIN</code>              |                                           | Retorna o numero da conta                  |
| <code class='variable'>NAME</code>               |                                           | Retorna o nome do titular da conta         |
| <code class='variable'>SERVER</code>             | <code class='variable-abbr'>SRV</code>    | Retorna o servidor da conta;               |
| <code class='variable'>CURRENCY</code>           | <code class='variable-abbr'>CURR</code>   | Retorna a moeda da conta;                  |
| <code class='variable'>COMPANY</code>            | <code class='variable-abbr'>COMP</code>   | Retorna a empresa/corretora da conta       |
| <code class='variable'>LIMIT_ORDER</code>        | <code class='variable-abbr'>LIMITO</code> | Retorna o limite máximo de ordens da conta |

## Variáveis do Mercado

> Essas variáveis contêm dados do mercado, incluindo preços de entrada, ativos envolvidos e horários de negociação.

| VARIÁVEIS:                                 | SIGLAS:                                     | RETORNOS:                                                     |
| ------------------------------------------ | ------------------------------------------- | ------------------------------------------------------------- |
| <code class='variable'>TOTAL_CANDLE</code> | <code class='variable-abbr'>TCANDLE</code>  | Retorna o total de candles;                                   |
| <code class='variable'>TIME_LEFT</code>    | <code class='variable-abbr'>TLEFT</code>    | Retorna o tempo restante;                                     |
| <code class='variable'>TIME_CURRENT</code> | <code class='variable-abbr'>TCURRENT</code> | Retorna o tempo atual;                                        |
| <code class='variable'>TIME_LOCAL</code>   | <code class='variable-abbr'>TLOCAL</code>   | Retorna o tempo local;                                        |
| <code class='variable'>TIME_SERVER</code>  | <code class='variable-abbr'>TSERVER</code>  | Retorna o tempo do servidor;                                  |
| <code class='variable'>LAST</code>         |                                             | Retorna o ultimo preço comercializado;                        |
| <code class='variable'>LAST_HIGH</code>    | <code class='variable-abbr'>LASTH</code>    | Retorna a máxima do dia;                                      |
| <code class='variable'>LAST_LOW</code>     | <code class='variable-abbr'>LASTL</code>    | Retorna a minima do dia;                                      |
| <code class='variable'>ASK</code>          |                                             | Retorna o preço de compra;                                    |
| <code class='variable'>ASK_HIGH</code>     | <code class='variable-abbr'>ASKH</code>     | Retorna o preço máximo de compra;                             |
| <code class='variable'>ASK_LOW</code>      | <code class='variable-abbr'>ASKL</code>     | Retorna o preço mínimo de compra;                             |
| <code class='variable'>BID</code>          |                                             | Retorna o preço de venda;                                     |
| <code class='variable'>BID_HIGH</code>     | <code class='variable-abbr'>BIDH</code>     | Retorna o preço máximo de venda;                              |
| <code class='variable'>BID_LOW</code>      | <code class='variable-abbr'>BIDL</code>     | Retorna o preço mínimo de venda;                              |
| <code class='variable'>SYMBOL</code>       |                                             | Retorna o ativo que o robô esta operando;                     |
| <code class='variable'>REAL</code>         |                                             | Retorna o ativo real, o ativo que as ordens serão executadas; |

## Variáveis de Ordens e Posição abertas

> Essas variáveis contém os dados de ordens e posições que ainda não foram encerradas, permitindo o acompanhamento em tempo real.

| VARIÁVEIS:                                     | SIGLAS:                                     | RETORNOS:                                                            |
| ---------------------------------------------- | ------------------------------------------- | -------------------------------------------------------------------- |
| <code class='variable'>ALL_VOLUME_OPEN</code>  | <code class='variable-abbr'>AVOLO</code>    | Retorna a soma do volume total das posições;                         |
| <code class='variable'>BUY_VOLUME_OPEN</code>  | <code class='variable-abbr'>BVOLO</code>    | Retorna a soma do volume total das posições de compra;               |
| <code class='variable'>SELL_VOLUME_OPEN</code> | <code class='variable-abbr'>SVOLO</code>    | Retorna a soma do volume total das posições de venda;                |
| <code class='variable'>ALL_POS_OPEN</code>     | <code class='variable-abbr'>APOSO</code>    | Retorna a quantidade de posições abertas;                            |
| <code class='variable'>BUY_POS_OPEN</code>     | <code class='variable-abbr'>BPOSO</code>    | Retorna a quantidade de posições abertas de compra;                  |
| <code class='variable'>SELL_POS_OPEN</code>    | <code class='variable-abbr'>SPOSO</code>    | Retorna a quantidade de posições abertas de venda;                   |
| <code class='variable'>ALL_OPEN</code>         | <code class='variable-abbr'>AOPEN</code>    | Retorna a quantidade de pedidos abertos, tanto de posições e ordens; |
| <code class='variable'>BUY_OPEN</code>         | <code class='variable-abbr'>BOPEN</code>    | Retorna a quantidade de pedidos abertos de compra;                   |
| <code class='variable'>SELL_OPEN</code>        | <code class='variable-abbr'>SOPEN</code>    | Retorna a quantidade de pedidos abertos de venda;                    |
| <code class='variable'>ALL_PROFIT_OPEN</code>  | <code class='variable-abbr'>APROFITO</code> | Retorna a soma do lucro das posições abertas;                        |
| <code class='variable'>BUY_PROFIT_OPEN</code>  | <code class='variable-abbr'>BPROFITO</code> | Retorna a soma do lucro das posições de compra abertas;              |
| <code class='variable'>SELL_PROFIT_OPEN</code> | <code class='variable-abbr'>SPROFITO</code> | Retorna a soma do lucro das posições de venda abertas;               |
| <code class='variable'>ALL_ORDER_OPEN</code>   | <code class='variable-abbr'>AORDERO</code>  | Retorna a quantidade de ordens abertas;                              |
| <code class='variable'>BUY_ORDER_OPEN</code>   | <code class='variable-abbr'>BORDERO</code>  | Retorna a quantidade de ordens de compra abertas;                    |
| <code class='variable'>SELL_ORDER_OPEN</code>  | <code class='variable-abbr'>SORDERO</code>  | Retorna a quantidade de ordens de venda abertas;                     |

## Variáveis de Ordens e Posição fechadas

> Essas variáveis contém os dados de ordens e posições que foram encerradas.

| VARIÁVEIS:                                     | SIGLAS:                                     | RETORNOS:                                                         |
| ---------------------------------------------- | ------------------------------------------- | ----------------------------------------------------------------- |
| <code class='variable'>ALL_VOLUME</code>       | <code class='variable-abbr'>AVOL</code>     | Retorna a soma total do volume;                                   |
| <code class='variable'>BUY_VOLUME</code>       | <code class='variable-abbr'>BVOL</code>     | Retorna a soma do volume de compra;                               |
| <code class='variable'>SELL_VOLUME</code>      | <code class='variable-abbr'>SVOL</code>     | Retorna a soma do volume de venda;                                |
| <code class='variable'>ALL_PROFIT</code>       | <code class='variable-abbr'>APROFIT</code>  | Retorna o total do lucro;                                         |
| <code class='variable'>BUY_PROFIT</code>       | <code class='variable-abbr'>BPROFIT</code>  | Retorna o total do lucro de compra;                               |
| <code class='variable'>SELL_PROFIT</code>      | <code class='variable-abbr'>SPROFIT</code>  | Retorna o total do lucro de venda;                                |
| <code class='variable'>ALL_GAIN_PROFIT</code>  | <code class='variable-abbr'>AGAINP</code>   | Retorna o total de profit ganho ignorando as perdas;              |
| <code class='variable'>BUY_GAIN_PROFIT</code>  | <code class='variable-abbr'>BGAINP</code>   | Retorna o total de profit ganho em compras ignorando as perdas;   |
| <code class='variable'>SELL_GAIN_PROFIT</code> | <code class='variable-abbr'>SGAINP</code>   | Retorna o total de profit ganho em vendas ignorando as perdas;    |
| <code class='variable'>ALL_LOSS_PROFIT</code>  | <code class='variable-abbr'>ALOSSP</code>   | Retorna o total de profit perdido ignorando os ganhos;            |
| <code class='variable'>BUY_LOSS_PROFIT</code>  | <code class='variable-abbr'>BLOSSP</code>   | Retorna o total de profit perdido em compras ignorando os ganhos; |
| <code class='variable'>SELL_LOSS_PROFIT</code> | <code class='variable-abbr'>SLOSSP</code>   | Retorna o total de profit perdido em vendas ignorando os ganhos;  |
| <code class='variable'>ALL_POS</code>          | <code class='variable-abbr'>APOS</code>     | Retorna o total de posições;                                      |
| <code class='variable'>BUY_POS</code>          | <code class='variable-abbr'>BPOS</code>     | Retorna o total de posições de compra;                            |
| <code class='variable'>SELL_POS</code>         | <code class='variable-abbr'>SPOS</code>     | Retorna o total de posições de venda;                             |
| <code class='variable'>ALL_GAIN</code>         | <code class='variable-abbr'>AGAIN</code>    | Retorna o total de vitorias;                                      |
| <code class='variable'>BUY_GAIN</code>         | <code class='variable-abbr'>BGAIN</code>    | Retorna o total de vitorias de compra;                            |
| <code class='variable'>SELL_GAIN</code>        | <code class='variable-abbr'>SGAIN</code>    | Retorna o total de vitorias de venda;                             |
| <code class='variable'>ALL_LOSS</code>         | <code class='variable-abbr'>ALOSS</code>    | Retorna o total de derrotas;                                      |
| <code class='variable'>BUY_LOSS</code>         | <code class='variable-abbr'>BLOSS</code>    | Retorna o total de derrotas de compra;                            |
| <code class='variable'>SELL_LOSS</code>        | <code class='variable-abbr'>SLOSS</code>    | Retorna o total de derrotas de venda;                             |
| <code class='variable'>ALL_COMMISSION</code>   | <code class='variable-abbr'>ACOMM</code>    | Retorna o total de comissões;                                     |
| <code class='variable'>BUY_COMMISSION</code>   | <code class='variable-abbr'>BCOMM</code>    | Retorna o total de comissões de compra;                           |
| <code class='variable'>SELL_COMMISSION</code>  | <code class='variable-abbr'>SCOMM</code>    | Retorna o total de comissões de venda;                            |
| <code class='variable'>ALL_SWAP</code>         | <code class='variable-abbr'>ASWAP</code>    | Retorna o total de trocas;                                        |
| <code class='variable'>BUY_SWAP</code>         | <code class='variable-abbr'>BSWAP</code>    | Retorna o total de trocas de compra;                              |
| <code class='variable'>SELL_SWAP</code>        | <code class='variable-abbr'>SSWAP</code>    | Retorna o total de trocas de venda;                               |
| <code class='variable'>TICKET</code>           |                                             | Retorna o ticket da ultima posição;                               |
| <code class='variable'>TICKET_BUY</code>       | <code class='variable-abbr'>TICKETB</code>  | Retorna o ticket da ultima compra;                                |
| <code class='variable'>TICKET_SELL</code>      | <code class='variable-abbr'>TICKETS</code>  | Retorna o ticket da ultima venda;                                 |
| <code class='variable'>GAIN_TICKET</code>      | <code class='variable-abbr'>GTICKET</code>  | Retorna o ticket da ultima posição com ganho;                     |
| <code class='variable'>GAIN_TICKET_BUY</code>  | <code class='variable-abbr'>GTICKETB</code> | Retorna o ticket da ultima compra com ganho;                      |
| <code class='variable'>GAIN_TICKET_SELL</code> | <code class='variable-abbr'>GTICKETS</code> | Retorna o ticket da ultima venda com ganho;                       |
| <code class='variable'>LOSS_TICKET</code>      | <code class='variable-abbr'>LTICKET</code>  | Retorna o ticket da ultima posição com perda;                     |
| <code class='variable'>LOSS_TICKET_BUY</code>  | <code class='variable-abbr'>LTICKETB</code> | Retorna o ticket da ultima compra com perda;                      |
| <code class='variable'>LOSS_TICKET_SELL</code> | <code class='variable-abbr'>LTICKETS</code> | Retorna o ticket da ultima venda com perda;                       |

<Aside type="tip">
  Variáveis de Ordens e Posições fechadas possuem 4 diferentes versões:
  <br /> **_WEEK** que retorna a soma total da semana,
  <br /> **_MONTH** que retorna a soma total do mês,
  <br /> **_YEAR** que retorna a soma total do ano,
  <br /> e as normais sem sufixo, que retornam o total do dia.
  <br />
  Para usar basta adicionar o sufixo ao final da variável. <br />
  Por exemplo:
  <code class="variable">ALL_VOLUME_WEEK</code>,
  <code class="variable">ALL_GAIN_YEAR</code>
  <br />
  As siglas seguem o mesmo padrão, adicionando o sufixo ao final da variável.
  <br /> Por exemplo:
  <code class="variable-abbr">AVOL_WEEK</code>,
  <code class="variable-abbr">AGAIN_YEAR</code>
</Aside>

## Variáveis de Sinais

> Essas variáveis guardam as informações dos sinais, que são definidos com base nos gatilhos de entrada e confirmação.

| VARIÁVEIS:                                           | SIGLAS:                                   | RETORNOS:                                                                                |
| ---------------------------------------------------- | ----------------------------------------- | ---------------------------------------------------------------------------------------- |
| <code class='variable'>SIG_TOTAL</code>              | <code class='variable-abbr'>SIGTT</code>  | Retorna a soma de todos os sinais do dia;                                                |
| <code class='variable'>SIG_BUY</code>                | <code class='variable-abbr'>SIGB</code>   | Retorna a soma de sinais de compra;                                                      |
| <code class='variable'>SIG_SELL</code>               | <code class='variable-abbr'>SIGS</code>   | Retorna a soma de sinais de venda;                                                       |
| <code class='variable'>SIG_LAST</code>               | <code class='variable-abbr'>SIGL</code>   | Retorna o tipo do ultimo sinal; (**-1**= Nenhum, **0**= Compra, **1**= Venda)            |
| <code class='variable'>SIG_TIME</code>               | <code class='variable-abbr'>SIGT</code>   | Retorna a hora do ultimo sinal;                                                          |
| <code class='variable'>SIG_TIME_BUY</code>           | <code class='variable-abbr'>SIGTB</code>  | Retorna a hora do ultimo sinal de compra;                                                |
| <code class='variable'>SIG_TIME_SELL</code>          | <code class='variable-abbr'>SIGTS</code>  | Retorna a hora do ultimo sinal de venda;                                                 |
| <code class='variable'>SIG_PRICE</code>              | <code class='variable-abbr'>SIGP</code>   | Retorna o preço do ultimo sinal;                                                         |
| <code class='variable'>SIG_PRICE_BUY</code>          | <code class='variable-abbr'>SIGPB</code>  | Retorna o preço do ultimo sinal de compra;                                               |
| <code class='variable'>SIG_PRICE_SELL</code>         | <code class='variable-abbr'>SIGPS</code>  | Retorna o preço do ultimo sinal de venda;                                                |
| <code class='variable'>SIG_TOTAL_CONFIRM</code>      | <code class='variable-abbr'>SIGTC</code>  | Retorna a soma de sinais confirmados;                                                    |
| <code class='variable'>SIG_LAST_CONFIRM</code>       | <code class='variable-abbr'>SIGLC</code>  | Retorna o tipo do ultimo sinal confirmado; (**-1**= Nenhum, **0**= Compra, **1**= Venda) |
| <code class='variable'>SIG_BUY_CONFIRM</code>        | <code class='variable-abbr'>SIGBC</code>  | Retorna a soma de sinais de compra confirmados;                                          |
| <code class='variable'>SIG_SELL_CONFIRM</code>       | <code class='variable-abbr'>SIGSC</code>  | Retorna a soma de sinais de venda confirmados;                                           |
| <code class='variable'>SIG_TIME_LAST_CONFIRM</code>  | <code class='variable-abbr'>SIGTLC</code> | Retorna a hora do ultimo sinal confirmado;                                               |
| <code class='variable'>SIG_TIME_BUY_CONFIRM</code>   | <code class='variable-abbr'>SIGTBC</code> | Retorna a hora do ultimo sinal de compra confirmado;                                     |
| <code class='variable'>SIG_TIME_SELL_CONFIRM</code>  | <code class='variable-abbr'>SIGTSC</code> | Retorna a hora do ultimo sinal de venda confirmado;                                      |
| <code class='variable'>SIG_PRICE_LAST_CONFIRM</code> | <code class='variable-abbr'>SIGPLC</code> | Retorna o preço do ultimo sinal confirmado;                                              |
| <code class='variable'>SIG_PRICE_BUY_CONFIRM</code>  | <code class='variable-abbr'>SIGPBC</code> | Retorna o preço do ultimo sinal de compra confirmado;                                    |
| <code class='variable'>SIG_PRICE_SELL_CONFIRM</code> | <code class='variable-abbr'>SIGPSC</code> | Retorna o preço do ultimo sinal de venda confirmado;                                     |
